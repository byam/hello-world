<source>
  @type tail
  format none
  path /var/log/fluentd_test.log
  pos_file /var/log/fluentd_test.pos
  tag fluentd.test
  rotate_wait 5
  read_from_head true
  refresh_interval 60
</source>

<match test>
  @type file
  path /var/log/fluentd/out_file_test
  format json
  buffer_type memory
  # compress gzip
  # symlink_path /path/to/symlink
  append false
</match>


<match fluentd.test>
  @type record_reformer
  remove_keys remove_me
  renew_record false
  enable_ruby false

  tag ${tag_parts[-1]}
  <record>
    hostname ${hostname}
    input_tag ${tag}
    last_tag ${tag_parts[-1]}
    message ${message}, yay!
  </record>
</match>
